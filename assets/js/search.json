const searchInput = document.getElementById("searchInput");
const searchResults = document.getElementById("searchResults");

let songsData = [];

// Load JSON file
fetch("../searchsongs.json")
  .then((res) => res.json())
  .then((data) => {
    songsData = data;
  });

// Search logic
searchInput.addEventListener("input", () => {
  const query = searchInput.value.toLowerCase().trim();
  searchResults.innerHTML = "";

  if (query === "") {
    searchResults.style.display = "none";
    return;
  }

  const filtered = songsData.filter(song =>
    song.title?.toLowerCase().includes(query) ||
    song.singer?.toLowerCase().includes(query) ||
    song.movie?.toLowerCase().includes(query) ||
    song.language?.toLowerCase().includes(query) ||
    song.actor?.toLowerCase().includes(query)
  );

  if (filtered.length === 0) {
    searchResults.innerHTML = "<div class='no-results'>No results found</div>";
  } else {
    filtered.slice(0, 10).forEach(song => {
      const div = document.createElement("div");
      div.classList.add("result-item");
      div.textContent = `${song.title} - ${song.singer || "Unknown Singer"}`;
      div.onclick = () => window.location.href = song.link;
      searchResults.appendChild(div);
    });
  }

  searchResults.style.display = "block";
});

// Hide on outside click
document.addEventListener("click", function (event) {
  if (!document.querySelector(".search-container").contains(event.target)) {
    searchResults.style.display = "none";
  }
});
